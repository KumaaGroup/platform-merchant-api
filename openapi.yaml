components:
  schemas:
    BatchPaymentCreateData:
      additionalProperties: false
      properties:
        payments:
          description: "Payments to create (max size is configurable, default: 100)"
          items:
            $ref: "#/components/schemas/PaymentCreateData"
          minItems: 1
          nullable: true
          type: array
      required:
        - payments
      type: object
    BatchPaymentCreatedResponse:
      additionalProperties: false
      properties:
        payments:
          description: Created payments, use externalId field to correlate with request items
          items:
            $ref: "#/components/schemas/PaymentCreatedResponse"
          type: array
      required:
        - payments
      type: object
    BillingAddress:
      additionalProperties: false
      properties:
        address1:
          description: Address line 1
          example: 645 Washington Blvd
          minLength: 1
          type: string
        address2:
          description: Address line 2
          type: string
        city:
          description: City
          example: Beaumont
          minLength: 1
          type: string
        country:
          description: ISO 3166-1 alpha-3 country code
          example: DEU
          pattern: ^[A-Z]{3}$
          type: string
        state:
          description: ISO31662 alpha2 state code
          example: TX
          pattern: ^[A-Z]{2}$
          type: string
        zip:
          description: Zip code
          example: "77705"
          minLength: 1
          type: string
      required:
        - address1
        - city
        - country
        - zip
      type: object
    CardExpiry:
      additionalProperties: false
      properties:
        month:
          description: Expiry month (1-12)
          example: 12
          format: int64
          maximum: 12
          minimum: 1
          type: integer
        year:
          description: 4-digit expiry year
          example: 2034
          format: int64
          minimum: 2026
          type: integer
      required:
        - year
        - month
      type: object
    CardPayloadResponse:
      additionalProperties: false
      properties:
        binCode:
          description: BIN code
          example: "424242"
          type: string
        issuer:
          description: Card issuer network
          example: visa
          type: string
        last4:
          description: Last 4 card digits
          example: "5613"
          type: string
        number:
          description: Masked card number
          example: "************4242"
          type: string
      type: object
    CardWhitelistCreateData:
      additionalProperties: false
      properties:
        cards:
          description: List of cards to whitelist
          items:
            $ref: "#/components/schemas/CardWhitelistCreateItem"
          maxItems: 100
          minItems: 1
          nullable: true
          type: array
      required:
        - cards
      type: object
    CardWhitelistCreateItem:
      additionalProperties: false
      properties:
        binCode:
          description: BIN code of card
          maxLength: 8
          minLength: 6
          pattern: ^[0-9]{6,8}$
          type: string
        last4:
          description: Card last 4 digits
          maxLength: 4
          minLength: 4
          pattern: ^[0-9]{4}$
          type: string
      required:
        - binCode
        - last4
      type: object
    CardWhitelistCreateResponse:
      additionalProperties: false
      properties:
        items:
          description: Created card whitelist entries
          items:
            $ref: "#/components/schemas/CardWhitelistResponse"
          nullable: true
          type: array
      required:
        - items
      type: object
    CardWhitelistListResponse:
      additionalProperties: false
      properties:
        items:
          description: Card whitelist entries
          items:
            $ref: "#/components/schemas/CardWhitelistResponse"
          nullable: true
          type: array
        nextCursor:
          description: Next cursor
          type: string
      required:
        - items
      type: object
    CardWhitelistResponse:
      additionalProperties: false
      properties:
        binCode:
          description: BIN code of card
          example: "424242"
          type: string
        cooldownExpiresAt:
          description: Cooldown expiration timestamp
          format: date-time
          type: string
        createdAt:
          description: Creation timestamp
          example: "2023-11-21T02:00:54.465Z"
          format: date-time
          type: string
        id:
          description: Card whitelist ID
          example: cwl_550e8400-e29b-41d4-a716-446655440000
          type: string
        last4:
          description: Card last 4 digits
          example: "4242"
          type: string
      required:
        - id
        - binCode
        - last4
        - createdAt
      type: object
    CustomerBlocklistCreateData:
      additionalProperties: false
      properties:
        customers:
          description: List of customers to block
          items:
            $ref: "#/components/schemas/CustomerBlocklistCreateItem"
          maxItems: 100
          minItems: 1
          nullable: true
          type: array
      required:
        - customers
      type: object
    CustomerBlocklistCreateItem:
      additionalProperties: false
      properties:
        binCode:
          description: BIN code of card (required together with last4)
          maxLength: 8
          minLength: 6
          pattern: ^([0-9]{6}|[0-9]{8})$
          type: string
        email:
          description: Email address (cannot be combined with card data)
          format: email
          type: string
        last4:
          description: Card last 4 digits (required together with binCode)
          maxLength: 4
          minLength: 4
          pattern: ^[0-9]{4}$
          type: string
      type: object
    CustomerBlocklistCreateResponse:
      additionalProperties: false
      properties:
        items:
          description: Created blocklist entries
          items:
            $ref: "#/components/schemas/CustomerBlocklistResponse"
          nullable: true
          type: array
      required:
        - items
      type: object
    CustomerBlocklistListResponse:
      additionalProperties: false
      properties:
        items:
          description: Customer blocklist entries
          items:
            $ref: "#/components/schemas/CustomerBlocklistResponse"
          nullable: true
          type: array
        nextCursor:
          description: Next cursor
          type: string
      required:
        - items
      type: object
    CustomerBlocklistResponse:
      additionalProperties: false
      properties:
        binCode:
          description: BIN code of card
          example: "424242"
          type: string
        createdAt:
          description: Creation timestamp
          example: "2023-11-21T02:00:54.465Z"
          format: date-time
          type: string
        email:
          description: Email address
          example: blocked@example.com
          type: string
        id:
          description: Customer blocklist ID
          example: blc_550e8400-e29b-41d4-a716-446655440000
          type: string
        last4:
          description: Card last 4 digits
          example: "4242"
          type: string
      required:
        - id
        - createdAt
      type: object
    CustomerResponse:
      additionalProperties: false
      properties:
        email:
          description: Customer email
          example: johndoe@gmail.com
          minLength: 1
          type: string
        firstName:
          description: Customer first name
          example: John
          minLength: 1
          type: string
        lastName:
          description: Customer last name
          example: Doe
          minLength: 1
          type: string
        phone:
          description: Customer phone number
          type: string
        ssn:
          description: Masked SSN if provided
          type: string
      required:
        - email
        - firstName
        - lastName
      type: object
    ErrorDetail:
      additionalProperties: false
      properties:
        location:
          description: Where the error occurred, e.g. 'body.items[3].tags' or 'path.thing-id'
          type: string
        message:
          description: Error message text
          type: string
        value:
          description: The value at the given location
      type: object
    ErrorModel:
      additionalProperties: false
      properties:
        detail:
          description: A human-readable explanation specific to this occurrence of the problem.
          example: Property foo is required but is missing.
          type: string
        errors:
          description: Optional list of individual error details
          items:
            $ref: "#/components/schemas/ErrorDetail"
          nullable: true
          type: array
        instance:
          description: A URI reference that identifies the specific occurrence of the problem.
          example: https://example.com/error-log/abc123
          format: uri
          type: string
        status:
          description: HTTP status code
          example: 400
          format: int64
          type: integer
        title:
          description: A short, human-readable summary of the problem type. This value should not change between occurrences of the error.
          example: Bad Request
          type: string
        type:
          default: about:blank
          description: A URI reference to human-readable documentation for the error.
          example: https://example.com/errors/example
          format: uri
          type: string
      type: object
    OpenBankingTransactionCreateData:
      additionalProperties: false
      properties:
        amount:
          description: Transaction amount in EUR
          example: 99.99
          format: decimal
          minimum: 0.01
          type: number
        metadata:
          description: Optional metadata (recommended JSON format)
          type: string
        sender:
          $ref: "#/components/schemas/OpenBankingTransactionSender"
          description: Sender information
        successUrl:
          description: Redirect URL on successful transaction
          format: uri
          minLength: 1
          type: string
      required:
        - amount
        - sender
        - successUrl
      type: object
    OpenBankingTransactionCreatedResponse:
      additionalProperties: false
      properties:
        id:
          description: Transaction ID
          example: obt_550e8400-e29b-41d4-a716-446655440000
          type: string
        url:
          description: URL for completing the transaction
          example: https://app.com/api/open-banking/transactions/widget/1ab
          type: string
      required:
        - id
        - url
      type: object
    OpenBankingTransactionListResponse:
      additionalProperties: false
      properties:
        items:
          description: Transaction list
          items:
            $ref: "#/components/schemas/OpenBankingTransactionResponse"
          nullable: true
          type: array
        nextCursor:
          description: Next cursor
          type: string
      required:
        - items
      type: object
    OpenBankingTransactionResponse:
      additionalProperties: false
      properties:
        amount:
          description: Transaction amount
          example: 99.99
          format: decimal
          type: number
        createdAt:
          description: Creation timestamp
          example: "2023-11-21T02:00:54.465Z"
          format: date-time
          type: string
        currency:
          description: Currency code (always EUR)
          example: EUR
          type: string
        iban:
          description: IBAN if available
          type: string
        id:
          description: Transaction ID
          example: obt_550e8400-e29b-41d4-a716-446655440000
          type: string
        metadata:
          description: Associated metadata
          type: string
        modifiedAt:
          description: Last modification timestamp
          example: "2023-11-21T02:00:54.465Z"
          format: date-time
          type: string
        sender:
          $ref: "#/components/schemas/OpenBankingTransactionSender"
          description: Sender information
        status:
          description: Transaction status
          enum:
            - PENDING
            - IN_TRANSIT
            - COMPLETED
            - FAILED
            - CANCELLED
          type: string
        successUrl:
          description: Success redirect URL
          type: string
      required:
        - id
        - amount
        - currency
        - status
        - sender
        - successUrl
        - createdAt
        - modifiedAt
      type: object
    OpenBankingTransactionSender:
      additionalProperties: false
      properties:
        email:
          description: Sender email address
          example: joe.doe@gmail.com
          format: email
          type: string
        name:
          description: Sender full name
          example: Joe Doe
          minLength: 1
          type: string
      required:
        - email
        - name
      type: object
    PaymentCard:
      additionalProperties: false
      properties:
        cvc:
          description: Card CVC number
          example: "123"
          pattern: ^[0-9]{3,4}$
          type: string
        expiry:
          $ref: "#/components/schemas/CardExpiry"
          description: Card expiry
        name:
          description: Cardholder name
          example: John Doe
          minLength: 1
          type: string
        number:
          description: Card number
          example: "4242424242424242"
          pattern: ^[0-9]{12,19}$
          type: string
      required:
        - number
        - name
        - expiry
        - cvc
      type: object
    PaymentConfirmedResponse:
      additionalProperties: false
      properties:
        message:
          description: Confirmation message
          example: The payment has been successfully confirmed.
          type: string
      required:
        - message
      type: object
    PaymentCreateData:
      additionalProperties: false
      properties:
        amount:
          description: Payment amount
          example: 12.34
          format: decimal
          minimum: 0.01
          type: number
        card:
          $ref: "#/components/schemas/PaymentCard"
          description: Card details
        currency:
          description: ISO4217 currency code
          example: USD
          pattern: ^[A-Z]{3}$
          type: string
        customer:
          $ref: "#/components/schemas/PaymentCustomer"
          description: Customer information
        customerIp:
          description: Customer IP address
          type: string
        externalId:
          description: External reference ID
          maxLength: 255
          minLength: 1
          pattern: ^[a-zA-Z0-9_-]+$
          type: string
        failureUrl:
          description: Redirect URL on failed payment
          format: uri
          type: string
        metadata:
          description: Metadata
          type: string
        successUrl:
          description: Redirect URL on successful payment
          format: uri
          type: string
      required:
        - card
        - customer
        - currency
        - amount
        - externalId
      type: object
    PaymentCreatedResponse:
      additionalProperties: false
      properties:
        externalId:
          description: External ID provided by merchant
          type: string
        id:
          description: Payment ID
          example: pay_550e8400-e29b-41d4-a716-446655440000
          type: string
        message:
          description: Decline reason if applicable
          type: string
        redirect:
          description: Authentication URL if required
          type: string
        status:
          description: Payment status
          enum:
            - EMAIL_VERIFICATION
            - AUTH_REQUESTED
            - AUTHORIZED
            - KYC_REQUESTED
            - CAPTURED
            - DECLINED
            - FAILED
            - TRANSFERRED
            - REFUNDED
            - PARTIALLY_REFUNDED
            - DISPUTE_WON
            - CHARGEBACK
            - PAYMENT_REQUESTED
            - PENDING_APPROVAL
            - REFUND_APPROVED
            - REFUND_REJECTED
            - REFUND_FAILED
            - REFUND_COMPLETED
          example: AUTH_REQUESTED
          type: string
      required:
        - id
        - externalId
        - status
      type: object
    PaymentCustomer:
      additionalProperties: false
      properties:
        billingAddress:
          $ref: "#/components/schemas/BillingAddress"
          description: Billing address
        email:
          description: Customer email
          example: johndoe@gmail.com
          format: email
          type: string
        firstName:
          description: Customer first name
          example: John
          minLength: 1
          type: string
        lastName:
          description: Customer last name
          example: Doe
          minLength: 1
          type: string
        phone:
          description: Customer phone number in E.164 format
          example: "+1234567890"
          pattern: ^\+[1-9]\d{1,14}$
          type: string
        ssn:
          description: U.S. Social Security Number (optional, for compliance checks)
          example: 123-45-6789
          pattern: ^[0-9]{3}-[0-9]{2}-[0-9]{4}$
          type: string
      required:
        - email
        - firstName
        - lastName
        - billingAddress
      type: object
    PaymentListResponse:
      additionalProperties: false
      properties:
        items:
          description: Payment list
          items:
            $ref: "#/components/schemas/PaymentPayloadResponse"
          nullable: true
          type: array
        nextCursor:
          description: Next cursor
          type: string
      required:
        - items
      type: object
    PaymentPayloadResponse:
      additionalProperties: false
      properties:
        amount:
          description: Payment amount
          example: 12.34
          format: decimal
          type: number
        authCode:
          description: Authorization code from acquirer
          type: string
        card:
          $ref: "#/components/schemas/CardPayloadResponse"
          description: Card details
        createdAt:
          description: Creation timestamp
          example: "2023-11-21T02:00:54.465Z"
          format: date-time
          type: string
        currency:
          description: ISO4217 currency code
          example: USD
          type: string
        customer:
          $ref: "#/components/schemas/CustomerResponse"
          description: Customer information
        externalId:
          description: External ID provided by merchant
          type: string
        id:
          description: Payment ID
          example: pay_550e8400-e29b-41d4-a716-446655440000
          type: string
        metadata:
          description: Associated metadata
          type: string
        responseCode:
          description: Decline reason code if applicable
          type: string
        status:
          description: Payment status
          enum:
            - EMAIL_VERIFICATION
            - AUTH_REQUESTED
            - AUTHORIZED
            - KYC_REQUESTED
            - CAPTURED
            - DECLINED
            - FAILED
            - TRANSFERRED
            - REFUNDED
            - PARTIALLY_REFUNDED
            - DISPUTE_WON
            - CHARGEBACK
            - PAYMENT_REQUESTED
            - PENDING_APPROVAL
            - REFUND_APPROVED
            - REFUND_REJECTED
            - REFUND_FAILED
            - REFUND_COMPLETED
          type: string
        threeDsCompletedAt:
          description: When 3DS authentication was completed
          format: date-time
          type: string
        threeDsOpenedAt:
          description: When 3DS authentication was initiated
          format: date-time
          type: string
        threeDsRedirectUrl:
          description: URL for 3DS challenge redirect
          type: string
        threeDsRequired:
          description: Whether 3DS authentication is required
          type: boolean
        threeDsResult:
          description: 3DS authentication result
          example: APPROVED
          type: string
        threeDsStatus:
          description: 3DS authentication status
          example: REDIRECT
          type: string
        type:
          description: Transaction type
          enum:
            - CHECKOUT
            - REFUND
            - DISPUTE
          type: string
        updatedAt:
          description: Last update timestamp
          example: "2023-11-21T02:00:54.465Z"
          format: date-time
          type: string
      required:
        - id
        - externalId
        - type
        - card
        - currency
        - amount
        - customer
        - status
        - createdAt
        - updatedAt
      type: object
    RefundCreateData:
      additionalProperties: false
      properties:
        amount:
          description: Refund amount (full amount if omitted)
          example: 5
          format: decimal
          minimum: 0.01
          type: number
        externalId:
          description: External reference ID
          maxLength: 255
          minLength: 1
          pattern: ^[a-zA-Z0-9_-]+$
          type: string
      required:
        - externalId
      type: object
    RefundCreatedResponse:
      additionalProperties: false
      properties:
        amount:
          description: Refund amount
          example: 12.34
          format: decimal
          type: number
        createdAt:
          description: Creation timestamp
          example: "2023-11-21T02:00:54.465Z"
          format: date-time
          type: string
        id:
          description: Refund ID
          example: ref_550e8400-e29b-41d4-a716-446655440000
          type: string
        paymentId:
          description: Associated payment ID
          example: pay_550e8400-e29b-41d4-a716-446655440000
          type: string
      required:
        - id
        - paymentId
        - amount
        - createdAt
      type: object
    Webhook:
      additionalProperties: false
      properties:
        createdAt:
          description: Creation timestamp
          format: date-time
          type: string
        enabled:
          description: Whether webhook is enabled
          type: boolean
        eventType:
          description: Event type
          enum:
            - CARD_PAYMENT
            - OPEN_BANKING
          type: string
        headers:
          description: Custom headers
          items:
            $ref: "#/components/schemas/WebhookHeader"
          nullable: true
          type: array
        id:
          description: Webhook ID
          example: whk_01234567-0000-0000-0000-000000000000
          type: string
        modifiedAt:
          description: Last modification timestamp
          format: date-time
          type: string
        url:
          description: Webhook URL
          type: string
      required:
        - id
        - url
        - eventType
        - enabled
        - createdAt
        - modifiedAt
      type: object
    WebhookCreateData:
      additionalProperties: false
      properties:
        enabled:
          description: Whether webhook is enabled
          type: boolean
        eventType:
          description: Event type
          enum:
            - CARD_PAYMENT
            - OPEN_BANKING
          type: string
        headers:
          description: Custom headers (max 5)
          items:
            $ref: "#/components/schemas/WebhookHeader"
          maxItems: 5
          nullable: true
          type: array
        url:
          description: Webhook URL (must be HTTPS)
          format: uri
          maxLength: 2048
          minLength: 1
          type: string
      required:
        - url
        - eventType
        - enabled
      type: object
    WebhookHeader:
      additionalProperties: false
      properties:
        name:
          description: Header name
          maxLength: 256
          minLength: 1
          type: string
        value:
          description: Header value
          maxLength: 4096
          minLength: 1
          type: string
      required:
        - name
        - value
      type: object
    WebhookUpdateData:
      additionalProperties: false
      properties:
        enabled:
          description: Whether webhook is enabled
          type: boolean
        headers:
          description: Custom headers (max 5)
          items:
            $ref: "#/components/schemas/WebhookHeader"
          maxItems: 5
          nullable: true
          type: array
        url:
          description: Webhook URL
          format: uri
          maxLength: 2048
          minLength: 1
          type: string
      type: object
    Webhooks:
      additionalProperties: false
      properties:
        items:
          description: List of webhooks
          items:
            $ref: "#/components/schemas/Webhook"
          nullable: true
          type: array
      type: object
info:
  title: BC Platform Merchants API
  version: 1.0.0
openapi: 3.0.3
paths:
  /api/blocklist/customers:
    get:
      description: Lists blocked customers with pagination
      operationId: list-customer-blocklist
      parameters:
        - description: Cursor for pagination
          explode: false
          in: query
          name: cursor
          schema:
            description: Cursor for pagination
            type: string
        - description: Maximum number of items to return
          example: 20
          explode: false
          in: query
          name: limit
          schema:
            description: Maximum number of items to return
            example: 20
            format: int64
            maximum: 100
            minimum: 1
            type: integer
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CustomerBlocklistListResponse"
          description: OK
        default:
          content:
            application/problem+json:
              schema:
                $ref: "#/components/schemas/ErrorModel"
          description: Error
      summary: List customer blocklist entries
      tags:
        - Customer Blocklist
    post:
      description: Blocks multiple customers by card (BIN + last 4 digits) or email
      operationId: create-customer-blocklist
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CustomerBlocklistCreateData"
              description: Customer blocklist creation data
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CustomerBlocklistCreateResponse"
          description: OK
        default:
          content:
            application/problem+json:
              schema:
                $ref: "#/components/schemas/ErrorModel"
          description: Error
      summary: Create customer blocklist entries
      tags:
        - Customer Blocklist
  /api/blocklist/customers/{id}:
    get:
      description: Retrieves an existing blocked customer by ID
      operationId: get-customer-blocklist
      parameters:
        - description: customer blocklist ID
          in: path
          name: id
          required: true
          schema:
            description: customer blocklist ID
            type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CustomerBlocklistResponse"
          description: OK
        default:
          content:
            application/problem+json:
              schema:
                $ref: "#/components/schemas/ErrorModel"
          description: Error
      summary: Get customer blocklist entry
      tags:
        - Customer Blocklist
  /api/open-banking/transactions:
    get:
      description: Lists open banking transactions with pagination
      operationId: list-open-banking-transactions
      parameters:
        - description: Cursor for pagination
          explode: false
          in: query
          name: cursor
          schema:
            description: Cursor for pagination
            type: string
        - description: Maximum number of items to return
          example: 20
          explode: false
          in: query
          name: limit
          schema:
            description: Maximum number of items to return
            example: 20
            format: int64
            maximum: 100
            minimum: 1
            type: integer
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OpenBankingTransactionListResponse"
          description: OK
        default:
          content:
            application/problem+json:
              schema:
                $ref: "#/components/schemas/ErrorModel"
          description: Error
      summary: List open banking transactions
      tags:
        - Open Banking
    post:
      description: Creates a new open banking transaction
      operationId: create-open-banking-transaction
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/OpenBankingTransactionCreateData"
              description: Open banking transaction creation data
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OpenBankingTransactionCreatedResponse"
          description: OK
        default:
          content:
            application/problem+json:
              schema:
                $ref: "#/components/schemas/ErrorModel"
          description: Error
      summary: Create open banking transaction
      tags:
        - Open Banking
  /api/open-banking/transactions/{openBankingTransactionId}:
    get:
      description: Retrieves an open banking transaction by ID
      operationId: get-open-banking-transaction
      parameters:
        - description: open banking transaction ID
          in: path
          name: openBankingTransactionId
          required: true
          schema:
            description: open banking transaction ID
            type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OpenBankingTransactionResponse"
          description: OK
        default:
          content:
            application/problem+json:
              schema:
                $ref: "#/components/schemas/ErrorModel"
          description: Error
      summary: Get open banking transaction
      tags:
        - Open Banking
  /api/payment:
    get:
      description: Lists existing payments with pagination
      operationId: list-payments
      parameters:
        - description: Cursor for pagination
          explode: false
          in: query
          name: cursor
          schema:
            description: Cursor for pagination
            type: string
        - description: Maximum number of items to return
          example: 20
          explode: false
          in: query
          name: limit
          schema:
            description: Maximum number of items to return
            example: 20
            format: int64
            maximum: 100
            minimum: 1
            type: integer
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaymentListResponse"
          description: OK
        default:
          content:
            application/problem+json:
              schema:
                $ref: "#/components/schemas/ErrorModel"
          description: Error
      summary: List payments
      tags:
        - Payment
    post:
      description: Requests a new payment
      operationId: create-payment
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/PaymentCreateData"
              description: Payment creation data
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaymentCreatedResponse"
          description: OK
        "422":
          description: Payment declined
      summary: Create payment
      tags:
        - Payment
  /api/payment/batch:
    post:
      description: Creates multiple payments atomically. All payments succeed or none are created. Maximum 100 payments per batch.
      operationId: create-payment-batch
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/BatchPaymentCreateData"
              description: Batch payment creation data
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BatchPaymentCreatedResponse"
          description: All payments created successfully
        "400":
          description: "Invalid request: batch size exceeded, duplicate externalId in batch, or validation error"
        "409":
          description: Duplicate externalId conflicts with existing payment
      summary: Create payments batch
      tags:
        - Payment
  /api/payment/{id}:
    get:
      description: Retrieves an existing payment by ID
      operationId: get-payment
      parameters:
        - description: payment ID
          in: path
          name: id
          required: true
          schema:
            description: payment ID
            type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaymentPayloadResponse"
          description: OK
        default:
          content:
            application/problem+json:
              schema:
                $ref: "#/components/schemas/ErrorModel"
          description: Error
      summary: Get payment
      tags:
        - Payment
  /api/payment/{id}/confirm:
    post:
      description: Confirms an existing payment by ID
      operationId: confirm-payment
      parameters:
        - description: payment ID
          in: path
          name: id
          required: true
          schema:
            description: payment ID
            type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaymentConfirmedResponse"
          description: OK
        default:
          content:
            application/problem+json:
              schema:
                $ref: "#/components/schemas/ErrorModel"
          description: Error
      summary: Confirm payment
      tags:
        - Payment
  /api/payment/{id}/refund:
    post:
      description: Request payment refund
      operationId: create-refund
      parameters:
        - description: payment ID
          in: path
          name: id
          required: true
          schema:
            description: payment ID
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RefundCreateData"
              description: Refund creation data
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RefundCreatedResponse"
          description: OK
        "201":
          description: Refund request submitted
        "422":
          description: Request unprocessable
      summary: Create refund
      tags:
        - Payment
  /api/webhooks:
    get:
      description: Returns all webhooks for the authenticated merchant
      operationId: get-webhooks
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Webhooks"
          description: OK
        default:
          content:
            application/problem+json:
              schema:
                $ref: "#/components/schemas/ErrorModel"
          description: Error
      summary: List webhooks
      tags:
        - Webhooks
    post:
      description: Creates a new webhook for the authenticated merchant - only one webhook per event type is allowed per merchant
      operationId: create-webhook
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/WebhookCreateData"
              description: Webhook creation data
        required: true
      responses:
        "201":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Webhook"
          description: Created
        default:
          content:
            application/problem+json:
              schema:
                $ref: "#/components/schemas/ErrorModel"
          description: Error
      summary: Create webhook
      tags:
        - Webhooks
  /api/webhooks/{webhookId}:
    delete:
      description: Deletes a webhook for the authenticated merchant
      operationId: delete-webhook
      parameters:
        - description: Webhook ID
          example: whk_01234567-0000-0000-0000-000000000000
          in: path
          name: webhookId
          required: true
          schema:
            description: Webhook ID
            example: whk_01234567-0000-0000-0000-000000000000
            type: string
      responses:
        "204":
          description: No Content
        default:
          content:
            application/problem+json:
              schema:
                $ref: "#/components/schemas/ErrorModel"
          description: Error
      summary: Delete webhook
      tags:
        - Webhooks
    get:
      description: Returns a specific webhook by ID for the authenticated merchant
      operationId: get-webhook
      parameters:
        - description: Webhook ID
          example: whk_01234567-0000-0000-0000-000000000000
          in: path
          name: webhookId
          required: true
          schema:
            description: Webhook ID
            example: whk_01234567-0000-0000-0000-000000000000
            type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Webhook"
          description: OK
        default:
          content:
            application/problem+json:
              schema:
                $ref: "#/components/schemas/ErrorModel"
          description: Error
      summary: Get webhook
      tags:
        - Webhooks
    patch:
      description: Partially updates a webhook for the authenticated merchant - only provided fields will be updated
      operationId: update-webhook
      parameters:
        - description: Webhook ID
          example: whk_01234567-0000-0000-0000-000000000000
          in: path
          name: webhookId
          required: true
          schema:
            description: Webhook ID
            example: whk_01234567-0000-0000-0000-000000000000
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/WebhookUpdateData"
              description: Webhook update data
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Webhook"
          description: OK
        default:
          content:
            application/problem+json:
              schema:
                $ref: "#/components/schemas/ErrorModel"
          description: Error
      summary: Update webhook
      tags:
        - Webhooks
  /api/whitelist/card:
    get:
      description: Lists whitelisted cards with pagination
      operationId: list-card-whitelist
      parameters:
        - description: Cursor for pagination
          explode: false
          in: query
          name: cursor
          schema:
            description: Cursor for pagination
            type: string
        - description: Maximum number of items to return
          example: 20
          explode: false
          in: query
          name: limit
          schema:
            description: Maximum number of items to return
            example: 20
            format: int64
            maximum: 100
            minimum: 1
            type: integer
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CardWhitelistListResponse"
          description: OK
        default:
          content:
            application/problem+json:
              schema:
                $ref: "#/components/schemas/ErrorModel"
          description: Error
      summary: List card whitelist entries
      tags:
        - Card Whitelist
    post:
      description: Whitelists multiple cards by BIN code and last 4 digits
      operationId: create-card-whitelist
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CardWhitelistCreateData"
              description: Card whitelist creation data
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CardWhitelistCreateResponse"
          description: OK
        default:
          content:
            application/problem+json:
              schema:
                $ref: "#/components/schemas/ErrorModel"
          description: Error
      summary: Create card whitelist entries
      tags:
        - Card Whitelist
  /api/whitelist/card/{id}:
    get:
      description: Retrieves an existing whitelisted card by ID
      operationId: get-card-whitelist
      parameters:
        - description: card whitelist ID
          in: path
          name: id
          required: true
          schema:
            description: card whitelist ID
            type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CardWhitelistResponse"
          description: OK
        default:
          content:
            application/problem+json:
              schema:
                $ref: "#/components/schemas/ErrorModel"
          description: Error
      summary: Get card whitelist entry
      tags:
        - Card Whitelist
servers:
  - url: http://localhost:8080
